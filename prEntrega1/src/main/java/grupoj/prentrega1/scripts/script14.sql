CREATE TABLE USUARIO (ID BIGINT NOT NULL, DTYPE VARCHAR(31), APELLIDOS VARCHAR(255), borrado SMALLINT DEFAULT 0 NOT NULL, email VARCHAR(255) NOT NULL UNIQUE, FECHANACIMIENTO DATE, MULTIMEDIA VARCHAR(255), nombre VARCHAR(255) NOT NULL, password VARCHAR(255) NOT NULL, TELEFONO VARCHAR(255), tipoNotificacionesRecibir VARCHAR(255) NOT NULL, GEOLOCALIZACION_ID BIGINT, PRIMARY KEY (ID))
CREATE TABLE PERIODISTA (ID BIGINT NOT NULL, puesto VARCHAR(255) NOT NULL, seccion VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE ADMINISTRADOR (ID BIGINT NOT NULL, identificador BIGINT NOT NULL, PRIMARY KEY (ID))
CREATE TABLE ANUNCIO (ID BIGINT NOT NULL, DIAS_CONTRATADOS INTEGER NOT NULL, DIMENSIONES VARCHAR(255), EMPRESA VARCHAR(255), FECHA_PUBLIC DATE NOT NULL, MULTIMEDIA VARCHAR(255) NOT NULL, PRIORIDAD INTEGER, admin_fk BIGINT NOT NULL, PRIMARY KEY (ID))
CREATE TABLE EVENTO (ID BIGINT NOT NULL, BORRADO SMALLINT DEFAULT 0 NOT NULL, DESCRIPCION VARCHAR(255), DONDE_COMPRAR VARCHAR(255), FECHA DATE NOT NULL, NOMBRE VARCHAR(255) NOT NULL, PRECIO FLOAT, VALIDADO SMALLINT DEFAULT 0 NOT NULL, ocurre_en_FK BIGINT NOT NULL, subido_por_FK BIGINT, PRIMARY KEY (ID))
CREATE TABLE FORMULARIO (ID BIGINT NOT NULL, notificacion_fk BIGINT NOT NULL, usuario_fk BIGINT NOT NULL, PRIMARY KEY (ID))
CREATE TABLE GEOLOCALIZACION (ID BIGINT NOT NULL, DIRECCION VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE LUGAR (ID BIGINT NOT NULL, BORRADO SMALLINT DEFAULT 0 NOT NULL, DESCRIPCION VARCHAR(255), FOTOS VARCHAR(255), NOMBRE VARCHAR(255) NOT NULL, tiene_geolocalizacion BIGINT NOT NULL, PRIMARY KEY (ID))
CREATE TABLE MENSAJE (ID BIGINT NOT NULL, ASUNTO VARCHAR(255), TEXTO VARCHAR(255), envia_mensaje BIGINT NOT NULL, PRIMARY KEY (ID))
CREATE TABLE NOTIFICACION (ID BIGINT NOT NULL, CONTENIDO VARCHAR(255), FECHA DATE NOT NULL, FORMATO VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TAG (ID BIGINT NOT NULL, TEXTO VARCHAR(255) UNIQUE, formulario_fk BIGINT NOT NULL, PRIMARY KEY (ID))
CREATE TABLE VALORACION_EVE (ID BIGINT NOT NULL, CALIFICACION INTEGER NOT NULL, COMENTARIO VARCHAR(255), FOTOS VARCHAR(255), realizado_por_fk BIGINT NOT NULL, valoracion_sobre_fk BIGINT NOT NULL, PRIMARY KEY (ID))
CREATE TABLE VALORACION_LUG (ID BIGINT NOT NULL, CALIFICACION INTEGER NOT NULL, COMENTARIO VARCHAR(255), FOTOS VARCHAR(255), realizado_por_fk BIGINT NOT NULL, valoracion_sobre_fk BIGINT NOT NULL, PRIMARY KEY (ID))
CREATE TABLE jnd_es_gestionado (administrador_fk BIGINT NOT NULL, usuario_fk BIGINT NOT NULL, PRIMARY KEY (administrador_fk, usuario_fk))
CREATE TABLE jnd_recibir_mensaje (administrador_fk BIGINT NOT NULL, mensaje_fk BIGINT NOT NULL, PRIMARY KEY (administrador_fk, mensaje_fk))
CREATE TABLE EVENTO_PERIODISTA (Evento_ID BIGINT NOT NULL, gestionado_by_ID BIGINT NOT NULL, PRIMARY KEY (Evento_ID, gestionado_by_ID))
CREATE TABLE jnd_historial_eventos (evento_fk BIGINT NOT NULL, formulario_fk BIGINT NOT NULL, PRIMARY KEY (evento_fk, formulario_fk))
CREATE TABLE jnd_meInteresa (evento_fk BIGINT NOT NULL, usuario_fk BIGINT NOT NULL, PRIMARY KEY (evento_fk, usuario_fk))
CREATE TABLE jnd_tag_evento (tags_FK BIGINT NOT NULL, evento_FK BIGINT NOT NULL, PRIMARY KEY (tags_FK, evento_FK))
CREATE TABLE jnd_verBuscarEventos (evento_fk BIGINT NOT NULL, usuario_fk BIGINT NOT NULL, PRIMARY KEY (evento_fk, usuario_fk))
CREATE TABLE jnd_gestionarLugar (lugar_fk BIGINT NOT NULL, periodista_fk BIGINT NOT NULL, PRIMARY KEY (lugar_fk, periodista_fk))
CREATE TABLE jnd_gestionarNotificacion (notificacion_fk BIGINT NOT NULL, periodista_fk BIGINT NOT NULL, PRIMARY KEY (notificacion_fk, periodista_fk))
CREATE TABLE jnd_notificaciones (notificacion_fk BIGINT NOT NULL, usuario_fk BIGINT NOT NULL, PRIMARY KEY (notificacion_fk, usuario_fk))
CREATE TABLE jnd_gestionarEvento (periodista_fk BIGINT NOT NULL, evento_fk BIGINT NOT NULL, PRIMARY KEY (periodista_fk, evento_fk))
ALTER TABLE USUARIO ADD CONSTRAINT SRIOGLCALIZACIONID FOREIGN KEY (GEOLOCALIZACION_ID) REFERENCES GEOLOCALIZACION (ID)
ALTER TABLE PERIODISTA ADD CONSTRAINT FK_PERIODISTA_ID FOREIGN KEY (ID) REFERENCES USUARIO (ID)
ALTER TABLE ADMINISTRADOR ADD CONSTRAINT ADMINISTRADOR_ID FOREIGN KEY (ID) REFERENCES USUARIO (ID)
ALTER TABLE ANUNCIO ADD CONSTRAINT ANUNCIO_admin_fk FOREIGN KEY (admin_fk) REFERENCES USUARIO (ID)
ALTER TABLE EVENTO ADD CONSTRAINT EVENTOsubidopor_FK FOREIGN KEY (subido_por_FK) REFERENCES USUARIO (ID)
ALTER TABLE EVENTO ADD CONSTRAINT EVENTOocurre_en_FK FOREIGN KEY (ocurre_en_FK) REFERENCES LUGAR (ID)
ALTER TABLE FORMULARIO ADD CONSTRAINT FORMULARIOsuariofk FOREIGN KEY (usuario_fk) REFERENCES USUARIO (ID)
ALTER TABLE FORMULARIO ADD CONSTRAINT FRMLRIOntfcacionfk FOREIGN KEY (notificacion_fk) REFERENCES NOTIFICACION (ID)
ALTER TABLE LUGAR ADD CONSTRAINT LGRtnglocalizacion FOREIGN KEY (tiene_geolocalizacion) REFERENCES GEOLOCALIZACION (ID)
ALTER TABLE MENSAJE ADD CONSTRAINT MENSAJEnviamensaje FOREIGN KEY (envia_mensaje) REFERENCES USUARIO (ID)
ALTER TABLE TAG ADD CONSTRAINT TAG_formulario_fk FOREIGN KEY (formulario_fk) REFERENCES FORMULARIO (ID)
ALTER TABLE VALORACION_EVE ADD CONSTRAINT VLRCNVEvlrcnsbrefk FOREIGN KEY (valoracion_sobre_fk) REFERENCES EVENTO (ID)
ALTER TABLE VALORACION_EVE ADD CONSTRAINT VLRCNEVErlzdoporfk FOREIGN KEY (realizado_por_fk) REFERENCES USUARIO (ID)
ALTER TABLE VALORACION_LUG ADD CONSTRAINT VLRCNLGvlrcnsbrefk FOREIGN KEY (valoracion_sobre_fk) REFERENCES LUGAR (ID)
ALTER TABLE VALORACION_LUG ADD CONSTRAINT VLRCNLUGrlzdoporfk FOREIGN KEY (realizado_por_fk) REFERENCES USUARIO (ID)
ALTER TABLE jnd_es_gestionado ADD CONSTRAINT jndsgstionadosrofk FOREIGN KEY (usuario_fk) REFERENCES USUARIO (ID)
ALTER TABLE jnd_es_gestionado ADD CONSTRAINT jndsgstndmnstrdrfk FOREIGN KEY (administrador_fk) REFERENCES USUARIO (ID)
ALTER TABLE jnd_recibir_mensaje ADD CONSTRAINT jndrcbrmnsjemnsjfk FOREIGN KEY (mensaje_fk) REFERENCES MENSAJE (ID)
ALTER TABLE jnd_recibir_mensaje ADD CONSTRAINT jndrcbrmdmnstrdrfk FOREIGN KEY (administrador_fk) REFERENCES USUARIO (ID)
ALTER TABLE EVENTO_PERIODISTA ADD CONSTRAINT VNTPRDSTAgstndbyID FOREIGN KEY (gestionado_by_ID) REFERENCES USUARIO (ID)
ALTER TABLE EVENTO_PERIODISTA ADD CONSTRAINT VNTPERIODISTAvntID FOREIGN KEY (Evento_ID) REFERENCES EVENTO (ID)
ALTER TABLE jnd_historial_eventos ADD CONSTRAINT jndhstrlvntfrmlrfk FOREIGN KEY (formulario_fk) REFERENCES FORMULARIO (ID)
ALTER TABLE jnd_historial_eventos ADD CONSTRAINT jndhstrlvntosvntfk FOREIGN KEY (evento_fk) REFERENCES EVENTO (ID)
ALTER TABLE jnd_meInteresa ADD CONSTRAINT jndmInteresasriofk FOREIGN KEY (usuario_fk) REFERENCES USUARIO (ID)
ALTER TABLE jnd_meInteresa ADD CONSTRAINT jndmInteresavntofk FOREIGN KEY (evento_fk) REFERENCES EVENTO (ID)
ALTER TABLE jnd_tag_evento ADD CONSTRAINT jndtageventotagsFK FOREIGN KEY (tags_FK) REFERENCES EVENTO (ID)
ALTER TABLE jnd_tag_evento ADD CONSTRAINT jndtageventovntoFK FOREIGN KEY (evento_FK) REFERENCES TAG (ID)
ALTER TABLE jnd_verBuscarEventos ADD CONSTRAINT jndvrBscrvntossrfk FOREIGN KEY (usuario_fk) REFERENCES USUARIO (ID)
ALTER TABLE jnd_verBuscarEventos ADD CONSTRAINT jndvrBscrvntsvntfk FOREIGN KEY (evento_fk) REFERENCES EVENTO (ID)
ALTER TABLE jnd_gestionarLugar ADD CONSTRAINT jndgstnrLugarlgrfk FOREIGN KEY (lugar_fk) REFERENCES LUGAR (ID)
ALTER TABLE jnd_gestionarLugar ADD CONSTRAINT jndgstnrLgrprdstfk FOREIGN KEY (periodista_fk) REFERENCES USUARIO (ID)
ALTER TABLE jnd_gestionarNotificacion ADD CONSTRAINT jndgstnrNtfprdstfk FOREIGN KEY (periodista_fk) REFERENCES USUARIO (ID)
ALTER TABLE jnd_gestionarNotificacion ADD CONSTRAINT jndgstnrNtntfccnfk FOREIGN KEY (notificacion_fk) REFERENCES NOTIFICACION (ID)
ALTER TABLE jnd_notificaciones ADD CONSTRAINT jndntfcacionessrfk FOREIGN KEY (usuario_fk) REFERENCES USUARIO (ID)
ALTER TABLE jnd_notificaciones ADD CONSTRAINT jndntfccnsntfccnfk FOREIGN KEY (notificacion_fk) REFERENCES NOTIFICACION (ID)
ALTER TABLE jnd_gestionarEvento ADD CONSTRAINT jndgstnrvntprdstfk FOREIGN KEY (periodista_fk) REFERENCES USUARIO (ID)
ALTER TABLE jnd_gestionarEvento ADD CONSTRAINT jndgstnrventovntfk FOREIGN KEY (evento_fk) REFERENCES EVENTO (ID)
CREATE TABLE SEQUENCE (SEQ_NAME VARCHAR(50) NOT NULL, SEQ_COUNT DECIMAL(15), PRIMARY KEY (SEQ_NAME))
INSERT INTO SEQUENCE(SEQ_NAME, SEQ_COUNT) values ('SEQ_GEN', 0)
