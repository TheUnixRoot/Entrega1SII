<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <ui:composition template="Layout.xhtml">
        <ui:define name="pageName">
            Configurar Perfil
        </ui:define>
        <ui:define name="navBarName">
            <ui:param name="nombrePagina" value="Configurar Perfil" />
        </ui:define>
        <ui:define name="cuerpo">
            <section id="cuerpo">
                <h:form>
                    <p:panelGrid columns="2" layout="grid">

                        <p:graphicImage value="#{configurarPerfil.foto}" />    
                        <p:fileUpload value="#{configurarPerfil.foto}" mode="simple" skinSimple="true"/>


                        <p:outputLabel value="Nombre:" for="nombre" />
                        <p:autoComplete id="nombre" value="#{configurarPerfil.nombre}" completeMethod="#{configurarPerfil.nombre}" />
                        
                        <p:outputLabel value="Apellidos:" for="apellidos" />
                        <p:autoComplete id="apellidos" value="#{configurarPerfil.apellidos}" completeMethod="#{configurarPerfil.apellidos}" />

                        <p:outputLabel value="Email:" for="email" />
                        <p:inputText id="email" value="#{configurarPerfil.email}" style="font-size: small"
                                        required="true" validatorMessage="Email no reconocido"
                                        requiredMessage="Se debe introducir un email"> 
                            <f:validateRegex pattern="([a-zA-Z0-9]|[._-])+@[a-zA-Z0-9]+\.(com|es|org|co\.uk|net)" />
                            <p:ajax update="memail" />
                        </p:inputText>
                        <h:message for="email" id="memail" style="font-size: large;color: red" />
                        <p:outputLabel/>
                        <p:outputLabel value="Contraseña:" for="contrasenia" />
                        <p:autoComplete id="contrasenia" value="#{configurarPerfil.contrasenia}" completeMethod="#{configurarPerfil.contrasenia}" />
                        
                        <p:outputLabel value="Teléfono:" for="telefono" />
                        <p:inputText id="telefono" value="#{configurarPerfil.telefono}" style="font-size: small"
                                        required="true" validatorMessage="Teléfono no válido"
                                        requiredMessage="Se debe introducir un teléfono"> 
                            <f:validateRegex pattern="([0-9]{9})" />
                            <p:ajax update="telef" />
                        </p:inputText>
                        <h:message for="telefono" id="telef" style="font-size: large;color: red" />
                        <p:outputLabel/>
                            
                        <p:outputLabel for="fechaNacimiento" value="Fecha de nacimiento:" />
                        <p:calendar id="fechaNacimiento" value="#{configurarPerfil.fechaNacimiento}" showOn="button" />    

                        <p:link outcome="formularioGustos.xhtml" value="Rellena un formulario sobre tus gustos">
                        <f:param name="productId" value="formularioGustos.xhtml" />
                        </p:link>

                        <h:commandButton value="Guardar" action="#{configurarPerfil.configurar()}"/>  

                    </p:panelGrid>    
                </h:form>  
            </section>
        </ui:define>
    </ui:composition>
    
</html>